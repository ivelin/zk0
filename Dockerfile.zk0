FROM huggingface/lerobot-gpu:latest

# Set working directory
WORKDIR /workspace

# Copy pyproject.toml and source code for dependency installation
COPY pyproject.toml /workspace/pyproject.toml
COPY src /workspace/src

# Install Flower framework and zk0 dependencies using uv (as per CI)
RUN uv pip install -e .

# Add venv bin to PATH for Flower executables
ENV PATH="/lerobot/.venv/bin:$PATH"

# Entrypoint will be overridden in docker-compose.yml