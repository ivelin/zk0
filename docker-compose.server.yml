services:
  superlink:
    image: flwr/superlink:1.23.0
    command: ["--insecure", "--isolation", "process"]
    ports:
      - "9091:9091"  # ServerAppIO API
      - "9092:9092"  # Fleet API
      - "9093:9093"  # Control API
    networks:
      - flwr-network

  superexec-server:
    build:
      context: .
      dockerfile: superexec.Dockerfile
    image: zk0-superexec:v0.7.0
    command: ["--insecure", "--plugin-type", "serverapp", "--appio-api-address", "superlink:9091"]
    volumes:
      - ./outputs:/workspace/outputs
      - ./pyproject.toml:/workspace/pyproject.toml
    depends_on:
      - superlink
    networks:
      - flwr-network

networks:
  flwr-network:
    external: true